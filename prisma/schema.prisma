generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model spaces {
  id                String   @id
  owner_id          String
  title             String
  description       String
  capacity          Int
  price_per_weekend Float?
  price_per_day     Float?
  comfort           String[]
  images            String[]
  status            String   @default("active")
  street            String
  number            String
  complement        String?
  neighborhood      String
  city              String
  state             String
  zipcode           String
  country           String
  users             users    @relation(fields: [owner_id], references: [id])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model subscriptions {
  id                String    @id
  user_id           String
  plan              String
  price             Float
  status            String
  trial_until       DateTime?
  next_billing_date DateTime?
  users             users     @relation(fields: [user_id], references: [id])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model users {
  id                    String                  @id
  email                 String                  @unique
  name                  String
  phone                 String
  password              String
  role                  Role                    @default(user)
  checked               Boolean                 @default(false)
  status                Status                  @default(active)
  spaces                spaces[]
  subscriptions         subscriptions[]
  password_reset_tokens password_reset_tokens[]
}

/// This model stores password reset tokens
model password_reset_tokens {
  id         String   @id
  user_id    String
  token      String   @unique
  expires_at DateTime
  used       Boolean  @default(false)
  created_at DateTime @default(now())
  users      users    @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@index([token])
  @@index([user_id])
}

enum Status {
  active
  inactive
}

enum Role {
  user
  admin
}